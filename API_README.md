# AI Code Detector API

This API provides endpoints to detect whether a code snippet was likely generated by AI or written by a human.

## Features

- **Automatic Language Detection**: Submit any code snippet and the API will automatically detect the programming language
- **Feature Extraction**: The API extracts semantic and syntactic features from the code
- **AI-Generation Probability**: Returns a probability score indicating likelihood of AI authorship
- **Self-Documenting**: Includes Swagger UI documentation at `/docs` endpoint

## Quick Start

### Making a Request

```bash
curl -X POST "http://localhost:8000/detect" \
  -H "Content-Type: application/json" \
  -d '{
    "code": "def hello_world():\n    print(\"Hello, World!\")"
  }'
```

You can optionally specify the language:

```bash
curl -X POST "http://localhost:8000/detect" \
  -H "Content-Type: application/json" \
  -d '{
    "code": "def hello_world():\n    print(\"Hello, World!\")",
    "language": "python"
  }'
```

### Sample Response

```json
{
  "probability": 0.87,
  "is_ai_generated": true,
  "language": "python",
  "features": {
    "avgFunctionLength": 1.0,
    "avgIdentifierLength": 6.75,
    "avgLineLength": 15.5,
    "emptyLinesDensity": 0.2,
    "functionDefinitionDensity": 0.25,
    "maintainabilityIndex": 65.0,
    "maxDecisionTokens": 2.0,
    "whiteSpaceRatio": 0.26
  }
}
```

## API Reference

### POST /detect

Analyzes a code snippet and returns detection results.

**Request Body:**

| Field | Type | Description |
|-------|------|-------------|
| code | string | Required. The source code to analyze |
| language | string | Optional. The programming language of the code. If not provided, it will be auto-detected |

**Supported Languages:**
- python
- java
- cpp (C/C++)
- javascript
- go
- rust

**Response:**

| Field | Type | Description |
|-------|------|-------------|
| probability | float | Probability of the code being AI-generated (0-1) |
| is_ai_generated | boolean | True if the probability is greater than 0.5 |
| language | string | Detected or provided language |
| features | object | Extracted code features |

### GET /model-info

Returns information about the model used for detection.

**Response:**

| Field | Type | Description |
|-------|------|-------------|
| model_type | string | Type of model used (e.g., "XGBoost") |
| feature_columns | array | List of feature columns used by the model |
| feature_importance | object | Feature importance scores (if available) |
| encoder | string | Name of the encoder model |
| max_sequence_length | integer | Maximum sequence length for encoding |

## Using the API in Your Application

### Python Example

```python
import requests

def detect_code(code, language=None):
    url = "http://your-api-endpoint/detect"
    payload = {"code": code}
    
    if language:
        payload["language"] = language
        
    response = requests.post(url, json=payload)
    return response.json()

# Example usage
result = detect_code("""
def hello_world():
    print("Hello, World!")
""")

print(f"AI-generated probability: {result['probability']:.2%}")
print(f"Is AI-generated: {result['is_ai_generated']}")
```

### JavaScript Example

```javascript
async function detectCode(code, language = null) {
  const url = "http://your-api-endpoint/detect";
  const payload = { code };
  
  if (language) {
    payload.language = language;
  }
  
  const response = await fetch(url, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });
  
  return response.json();
}

// Example usage
detectCode(`
function helloWorld() {
  console.log("Hello, World!");
}
`).then(result => {
  console.log(`AI-generated probability: ${(result.probability * 100).toFixed(2)}%`);
  console.log(`Is AI-generated: ${result.is_ai_generated}`);
}); 